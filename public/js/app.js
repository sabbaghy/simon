"use strict";var userName,mainNav=document.getElementById("nav__links"),toggleMenu=document.getElementById("toggle-menu"),navList=document.getElementById("nav__list"),navItems=document.querySelectorAll(".nav__item"),navLenght=navItems.length,menuOpen=!1;toggleMenu.addEventListener("click",(function(){mainNav.classList.toggle("show-menu"),toggleMenu.classList.toggle("open"),menuOpen=!menuOpen})),navItems.forEach((function(e){e.addEventListener("click",(function(){navList.querySelector(".nav__item--active").classList.remove("nav__item--active"),e.classList.add("nav__item--active"),menuOpen&&(mainNav.classList.toggle("show-menu"),toggleMenu.classList.toggle("open"),menuOpen=!1)}))}));var btnIntro=document.getElementById("btn-intro"),intro=document.getElementById("intro");function showBestScores(e){var n=document.getElementById("best-score");n.innerHTML="",e.forEach((function(e){n.innerHTML+="<li> ".concat(e.player," - ").concat(e.score,"</li>")}))}function showUserScores(e){var n=document.getElementById("user-score");n.innerHTML="";for(var r=0;r<e.length;r++)n.innerHTML+="<li> score ".concat(r+1," = ").concat(e[r],"</li>")}btnIntro.addEventListener("click",(function(e){e.preventDefault(),userName=document.getElementById("user").value.trim();var n=document.getElementById("scores"),r=JSON.parse(localStorage.getItem("bestScore"))||null;if(null!==r&&showBestScores(r),0===userName||null===userName||""===userName)console.log("no se registra niveles");else{n.classList.add("scores--show");var t=JSON.parse(localStorage.getItem("userScore-".concat(userName)))||null;null!==t&&showUserScores(t)}intro.classList.remove("intro--show")}));var flash,turn,good,compTurn,intervalId,win,gameOrder=[],playerOrder=[],on=!1,strict=!1,noise=!0,numberOfLevels=5,turnCounter=document.getElementById("turn"),green=document.getElementById("green"),red=document.getElementById("red"),gold=document.getElementById("gold"),blue=document.getElementById("blue"),onBtn=document.getElementById("on-btn"),startBtn=document.getElementById("start-btn"),strictBtn=document.getElementById("strict-btn"),colors=[{pad:green,normal:"darkgreen",press:"lightgreen",clip:"green-sound"},{pad:red,normal:"darkred",press:"tomato",clip:"red-sound"},{pad:gold,normal:"goldenrod",press:"yellow",clip:"gold-sound"},{pad:blue,normal:"darkblue",press:"lightskyblue",clip:"blue-sound"}];function play(){win=!1,gameOrder=[],playerOrder=[],flash=0,intervalId=0,turn=1,turnCounter.innerHTML=1,good=!0,console.log("inicia un nuevo juego");for(var e=0;e<numberOfLevels;e++)gameOrder.push(Math.floor(4*Math.random())+1);for(var n=0;n<4;n++)accion(colors[n]);compTurn=!0,intervalId=setInterval(gameTurn,800)}function gameTurn(){on=!1,flash===turn&&(clearInterval(intervalId),compTurn=!1,clearColor(),on=!0),compTurn&&(clearColor(),setTimeout((function(){1===gameOrder[flash]&&accion(colors[0]),2===gameOrder[flash]&&accion(colors[1]),3===gameOrder[flash]&&accion(colors[2]),4===gameOrder[flash]&&accion(colors[3]),flash++}),200))}function accion(e){noise&&document.getElementById(e.clip).play();noise=!0,e.pad.style.background=e.press}function clearColor(){green.style.background="darkgreen",red.style.background="darkred",gold.style.background="goldenrod",blue.style.background="darkblue"}function flashColor(){green.style.background="lightgreen",red.style.background="tomato",gold.style.background="yellow",blue.style.background="lightskyblue"}function check(){playerOrder[playerOrder.length-1]!==gameOrder[playerOrder.length-1]&&(good=!1),playerOrder.length===numberOfLevels&&good&&winGame(),good||(flashColor(),turnCounter.innerHTML="NO!",setTimeout((function(){turnCounter.innerHTML=turn,clearColor(),strict?play():(compTurn=!0,flash=0,playerOrder=[],good=!0,intervalId=setInterval(gameTurn,800))}),800),noise=!1),turn===playerOrder.length&&good&&!win&&(turn++,playerOrder=[],compTurn=!0,flash=0,turnCounter.innerHTML=turn,intervalId=setInterval(gameTurn,800))}function winGame(){flashColor(),turnCounter.innerHTML="WIN",on=!1,win=!0,localStorage.setItem("userScore-".concat(userName),"el score es 121")}strictBtn.addEventListener("click",(function(e){strict=!!strictBtn.checked,console.log("el boton strict = ",strict)})),onBtn.addEventListener("click",(function(e){!0===onBtn.checked?(turnCounter.innerHTML="-",on=!0):(turnCounter.innerHTML="",on=!1,clearColor(),clearInterval(intervalId))})),startBtn.addEventListener("click",(function(e){(on||win)&&play()})),green.addEventListener("click",(function(e){on&&(playerOrder.push(1),check(),accion(colors[0]),win||setTimeout((function(){clearColor()}),300))})),red.addEventListener("click",(function(e){on&&(playerOrder.push(2),check(),accion(colors[1]),win||setTimeout((function(){clearColor()}),300))})),gold.addEventListener("click",(function(e){on&&(playerOrder.push(3),check(),accion(colors[2]),win||setTimeout((function(){clearColor()}),300))})),blue.addEventListener("click",(function(e){on&&(playerOrder.push(4),check(),accion(colors[3]),win||setTimeout((function(){clearColor()}),300))}));